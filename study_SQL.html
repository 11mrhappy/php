<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
<div>使うスタイルはUTF8mb4_general_ci</div>
<div>SELECTはターブルの内容を見る;</div>
<div>*は全て;</div>
<div>FROMはどこから　テーブル名;</div>
<div>INSERT INTO テーブル名 でデータを挿入する;</div>
<div>SET カラム=値 でデータを入れる;</div>
<div>SETではなくVALUESを使って同じ動きをすることも可能。その場合INSERT INTO の後に テーブル名 (カラム名) VALUES (値);</div>
<div>CREATE TABLE テーブル名 でテーブルを作り、その後(カラム名 カラムの形, ・・・)とする;</div>
<div>UPDATE テーブル名 でデータの更新ができる、WHERE id=1などで場所を示す必要がある。もしWHEREがないとテーブル内の全データが書き換えられる;</div>
<div>DELETE FROM テーブル名 で、WHERE id=1 などでデータを削除する。WHEREがないとテーブル内の全データを削除するので注意;</div>
<div>idが2と2みたいにかぶらないようにプライマリーキーを設定する。テーブルを殻にした状態で構造(Structure)からid欄の主(primary)を実行する;</div>
<div>テーブル作成する上でidのNULL indexでprimaryにしておけば最初からprimary keyにしておける;</div>
<div>idを自動で連番にしてくれる AUTO_INCREMENT は、カラム編集の A_I にチェックを入れることで設定可能;</div>
<div>SELECT * FROM テーブル名 WHERE id=1; などでidが1のデータを見れるが、WHERE カラム名 LIKE を使うことで検索機能を使える;</div>
<div>LIKE '%キーワード%'なら指定したカラムにキーワードが含まれていればヒットする;</div>
<div>'キーワード%'は前方一致といい、最初にキーワードが含まれるものを探す;</div>
<div>'%キーワード'は後方一致、最後に含まれるもののみヒットさせる;</div>
<div>演算子で検索する時、AND や OR を使って条件をさらに絞ることもできる&& || と一緒;</div>
<div>カラム型のTIMESTAMPはデータ登録時間や更新時間がカラムの値として保存される</div>
<div>SELECT SUM(price) FROM テーブル名 でpriceカラムの合計値を出力する</div>
<div>MAXは最大のもの、MINは最小のもの、COUNTは件数、AVGはアベレージ(平均値)を得る。</div>
<div>SELECT * FROM makers, my_items WHERE my_items.id=1 AND makers.id=my_items.maker_id;</div>
<div>まずFROMの後につなげたいテーブルを全て , でつなげる。そしてWHERE id=idのように紐付ける。今回は makers.id=my_items.maker_id。ついでにmy_items.id=1でさらに条件を</div>
<div>WHERE句やORDER BYを組み合わせる場合はWHEREが先にくる。</div>
<div>例えばnameカラムがそれぞれ「いちご」「バナナ」「ブルーベリー」「りんご」が昇順で並ぶと、いちご→りんご→バナナ→ブルーベリーの順になる。ひらがなとカタカナは別物として認識される。漢字もまた別。;</div>
<div>じゃあどうやってひらがな、カタカナ、漢字を別々にせずに並べるのか > kanaカラムを増やす。ひらがなならひらがな、カタカナならカタカナで全部統一する;</div>
<div>例えばランキングのカラム(rank)などの、相手がいて自分の情報が変わるもの を相対情報という。1位2位はすぐに変わるものなので、実際の売上のカラムを作る必要がある。rankではなくsalesカラムを作る;</div>
<div>相対情報の反対に、売り上げた数など、相手の情報と比べ自分の変化しない情報を 絶対情報 という;</div>
<div>SELECT item_id, SUM(count) FROM carts GROUP BY item_id で同じitem_idのcountカラムの合計値とitem_idを得る。GROUP BY句はひとまとまりでデータを取得する;</div>
<div>1つ上のSQLだと売れてない商品が0として表示されないので、そこでLEFT JOINを使う。SELECT item_name, SUM(count) FROM my_items LEFT JOIN carts ON my_items.id=carts.item_id GROUP BY carts.item_id; となる</div>
<div>
  <sub>正直このLEFT JOIN、RIGHT JOIN 外部結合? 内部結合?はわからん</sub>
</div>
<div>例えばテーブルから○○_idを取得して重複する時、SELECT DISTINCT(item_id) FROM carts;とすることで重複を避ける;</div>
<div>priceカラムで何円以上何円以下のみを取得する場合、SELECT * FROM テーブル名 WHERE price BETWEEN 30 AND 100;のように書く。以上以下の間のみ取得可能;</div>
<div>~~WHERE id=1 OR id=3; のようにもかけるが、id IN (1, 3); のようにもかける;</div>
<div>最後に LIMIT 3; とすると、最初から3番目までの情報を取得する。3ではなく、2, 3のようにすると2件目から3件を取得する。1件目は無視するということ;</div>
<div>SELECT i.item_name, SUM(c.count) FROM my_items i, carts c WHERE i.id=c.item_id GROUP BY c.item_id;
  これは商品名と売上の合計を取得するSQLで、iとかcは、my_itemsとcartsテーブルの略称。FROM テーブル名 の後につけたい略称のアルファベット一文字を置くことで、そのSQL上ではそのアルファベットをテーブルとして使うことができるため見やすくなる。;
</div>
<div>DBのバックアップを取ろう。手順 > エクスポート(1つのテーブルのみではなく、DBをエクスポートする。ホームからエクスポートすると全DBをエクスポートできる);</div>
<div> >エクスポート時はquick(簡易)かcustom(詳細)を選べる、普通はquickでいいけど、macOSは詳細にし「出力をファイルに保存するにチェック」「生成オプション」で「CREATE TABLEコマンドを追加するにチェック」で実行</div>
</body>
</html>